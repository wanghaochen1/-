clear;
%信号时长为0.001s，带宽为10MHz，采样率是10倍带宽，现有两个目标，一个距离发射位置10km，另一个距离发射位置10.1km，
% 接收信号幅度相差50倍。首先，判断雷达系统能否分辨出两个目标，并通过加hanning窗提高对弱信号的分辨能力。
T=1e-3;%%信号时长
B=10e6;%%带宽
K=B/T;%%调频率
fs=100e6;%%采样频率
c=3e8;%%光速
t=-T/2:1/fs:T/2-1/fs;
sig=exp(j*2*pi*(0.5*K*t.^2));%%发射信号
R1=1e4;%%距离1
R2=1.01e4;%%距离2
tau1=2*R1/c;%%时延1
tau2=2*R2/c;%%时延2
r=t*c/2;%%距离
recv=exp(j*2*pi*(0.5*K*(t-tau1).^2))+0.02*exp(j*2*pi*(0.5*K*(t-tau2).^2));%%接收信号
mix=ifft(fft(recv).*conj(fft(sig)));%%相关性
subplot(121);plot(r,db(fftshift(mix)));
xlim([R1-2000,R1+2000]);
recv1=recv.*(hanning(size(t,2)))';%%时域加窗
mix1=ifft(fft(recv1).*conj(fft(sig)));%%相关性
subplot(122);plot(r,db(fftshift(mix1)));
xlim([R1-2000,R1+2000]);
%%由图可知，加窗后，两个目标的距离分辨率提高了，但是对弱信号的分辨能力并没有提高。
%%假设chirp脉 冲压缩雷达信号的带宽30 MHz，脉宽为10us，脉冲重复周期为80us， 采样率为10倍带宽。现有相距10m的两个目标，功率相差13.4dB，通过对脉冲压缩的本地信号时域加窗的方法，提高对弱目标的分辨能力。
clear;
T=10e-6;%%脉冲宽度
B=30e6;%%带宽
K=B/T;%%调频率
fs=10*B;%%采样频率
c=3e8;%%光速
t=-T/2:1/fs:T/2-1/fs;
sig=exp(j*2*pi*(0.5*K*t.^2));%%发射信号
R1=10;%%距离1
R2=10.01;%%距离2
tau1=2*R1/c;%%时延1
tau2=2*R2/c;%%时延2
r=t*c/2;%%距离
recv=exp(j*2*pi*(0.5*K*(t-tau1).^2))+0.02*exp(j*2*pi*(0.5*K*(t-tau2).^2));%%接收信号
mix=ifft(fft(recv).*conj(fft(sig)));%%相关性
subplot(121);plot(r,db(fftshift(mix)));
xlim([R1-2,R1+2]);
recv1=recv.*(hanning(size(t,2)))';%%时域加窗
mix1=ifft(fft(recv1).*conj(fft(sig)));%%相关性
subplot(122);plot(r,db(fftshift(mix1)));
xlim([R1-2,R1+2]);
